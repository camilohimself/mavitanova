---
import BaseLayout from '../layouts/BaseLayout.astro';
import { siteConfig } from '../config/site';

/**
 * Page Prestations - Architecture UX optimisée pour la conversion
 * Objectif: 4 demandes de RDV/semaine
 * Structure: Hero → Identification → Services → Rassurance → CTA → FAQ
 */

const accompagnements = [
  {
    id: 1,
    title: 'Thérapie Individuelle',
    description: 'Un espace pour faire le point, surmonter une épreuve ou mieux vous connaître.',
    details: 'En cabinet ou en ligne',
    price: siteConfig.pricing.individual,
    duration: '50 min',
  },
  {
    id: 2,
    title: 'Thérapie de Couple',
    description: 'Pour rétablir la communication, surmonter une crise et retrouver une dynamique saine.',
    details: 'En cabinet',
    price: siteConfig.pricing.couple,
    duration: '75 min',
  },
  {
    id: 3,
    title: 'Chromothérapie',
    description: 'Une approche douce par les couleurs pour libérer les blocages énergétiques et émotionnels.',
    details: 'En cabinet',
    price: siteConfig.pricing.chromotherapy,
    duration: '45 min',
  },
];

const problematiques = [
  { label: 'Gestion du stress & Anxiété', href: '/ressources/anxiete-stress' },
  { label: 'Épuisement professionnel (Burn-out)', href: '/ressources/burn-out' },
  { label: 'Manque de confiance en soi', href: null },
  { label: 'Difficultés relationnelles', href: '/ressources/communication-couple' },
  { label: 'Deuil & Séparation', href: null },
  { label: 'Dépression', href: null },
  { label: 'Thérapie de couple', href: '/ressources/therapie-couple' },
  { label: 'Transitions de vie', href: null },
];

const etapes = [
  {
    num: '01',
    title: 'Le premier contact',
    text: 'La prise de rendez-vous se fait simplement en ligne ou par téléphone. Ce premier pas est le vôtre, en toute liberté.',
  },
  {
    num: '02',
    title: 'Notre première séance',
    text: 'Une rencontre pour faire connaissance, exposer votre situation et définir ensemble vos objectifs, sans aucun jugement.',
  },
  {
    num: '03',
    title: 'Un cadre confidentiel',
    text: 'Chaque échange est strictement confidentiel, protégé par le secret professionnel, pour garantir votre sécurité.',
  },
];

const faqs = [
  {
    question: 'Combien de séances sont nécessaires ?',
    answer: 'Cela dépend de votre situation et de vos objectifs. Certaines personnes viennent pour quelques séances, d\'autres pour un accompagnement plus long. Nous évaluons ensemble régulièrement.',
  },
  {
    question: 'La thérapie en ligne est-elle aussi efficace ?',
    answer: 'Les études montrent que la thérapie en ligne est aussi efficace que la thérapie en présentiel pour la plupart des problématiques. L\'essentiel est la qualité de la relation thérapeutique.',
  },
  {
    question: 'Comment se passe la première séance ?',
    answer: 'C\'est un moment pour faire connaissance. Vous m\'expliquez ce qui vous amène, je vous présente ma façon de travailler, et nous voyons ensemble si nous souhaitons poursuivre.',
  },
  {
    question: 'Quels moyens de paiement acceptez-vous ?',
    answer: 'J\'accepte le paiement par TWINT ou en espèces. Le règlement se fait à la fin de chaque séance.',
  },
];
---

<BaseLayout
  title="Prestations"
  description="Consultations psychologiques : thérapie individuelle, en ligne, de couple et chromothérapie. Tarifs transparents."
>
  <!-- Section 1: Hero Émotionnel -->
  <section class="hero-section py-24 lg:py-32 relative overflow-hidden">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <div class="grid lg:grid-cols-2 gap-12 items-center">
          <div class="text-center lg:text-left fade-in">
            <h1 class="text-4xl lg:text-5xl mb-6 leading-tight">
              Votre chemin vers<br />
              <span class="text-secondary">un mieux-être</span><br />
              commence ici.
            </h1>
            <p class="text-xl text-text-light leading-relaxed">
              Que vous traversiez une période de doute, de stress, ou que vous cherchiez
              simplement à mieux vous comprendre, vous trouverez ici un espace d'écoute
              sécurisant pour vous accompagner.
            </p>
          </div>
          <div class="flex justify-center lg:justify-end fade-in-delay">
            <img
              src="/images/illustrations/path-journey.png"
              alt=""
              class="w-full max-w-sm opacity-90"
              aria-hidden="true"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section 2: Identification - Problématiques -->
  <section class="py-20 lg:py-28 bg-bg-alt">
    <div class="container">
      <div class="max-w-3xl mx-auto text-center">
        <h2 class="text-3xl lg:text-4xl mb-4">Si vous vous reconnaissez...</h2>
        <p class="text-text-light text-lg mb-12">
          Je vous aide à naviguer à travers des défis tels que :
        </p>

        <div class="tags-grid">
          {problematiques.map((item) => (
            item.href ? (
              <a href={item.href} class="tag-item tag-link">
                {item.label}
                <svg class="tag-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5l7 7-7 7"/>
                </svg>
              </a>
            ) : (
              <span class="tag-item">{item.label}</span>
            )
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Section 3: Accompagnements -->
  <section class="py-20 lg:py-28">
    <div class="container">
      <div class="max-w-5xl mx-auto">
        <h2 class="text-3xl lg:text-4xl text-center mb-16">Mes Accompagnements</h2>

        <div class="cards-grid">
          {accompagnements.map((service) => (
            <article class="service-card group">
              <div class="card-inner">
                <h3 class="text-2xl font-heading mb-3">{service.title}</h3>
                <p class="text-text-light leading-relaxed mb-4">{service.description}</p>
                <p class="text-sm text-text-muted mb-6">{service.details}</p>

                <div class="card-footer">
                  <div class="price-block">
                    <span class="price-value">{service.price}</span>
                    <span class="price-currency">{siteConfig.pricing.currency}</span>
                    <span class="price-duration">/ {service.duration}</span>
                  </div>

                  <a href="/contact" class="card-cta group-hover:text-secondary">
                    Choisir cet accompagnement
                    <svg class="w-4 h-4 ml-1 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                    </svg>
                  </a>
                </div>
              </div>
            </article>
          ))}
        </div>

        <p class="text-center text-sm text-text-muted mt-12 max-w-xl mx-auto">
          Les consultations ne sont pas remboursées par l'assurance de base.
          Certaines assurances complémentaires peuvent prendre en charge une partie des frais.
        </p>
      </div>
    </div>
  </section>

  <!-- Section 4: Rassurance - Comment ça marche -->
  <section class="py-20 lg:py-28 bg-bg-alt">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl lg:text-4xl text-center mb-16">
          Mon approche :<br />
          <span class="text-secondary">bienveillance, écoute et confidentialité</span>
        </h2>

        <div class="steps-grid">
          {etapes.map((etape) => (
            <div class="step-item">
              <span class="step-num">{etape.num}</span>
              <h3 class="text-xl font-heading mb-3">{etape.title}</h3>
              <p class="text-text-light leading-relaxed">{etape.text}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Section 5: CTA Final -->
  <section class="py-24 lg:py-32">
    <div class="container">
      <div class="max-w-2xl mx-auto text-center">
        <img
          src="/images/illustrations/hand-flower.png"
          alt=""
          class="w-32 h-auto mx-auto mb-8"
          loading="lazy"
          aria-hidden="true"
        />
        <h2 class="text-3xl lg:text-4xl mb-4">Prêt·e à faire le premier pas ?</h2>
        <p class="text-text-light text-lg mb-10 leading-relaxed">
          Je suis à votre disposition pour répondre à vos questions
          ou pour convenir d'un premier rendez-vous.
        </p>

        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
          <a
            href="/contact"
            class="cta-button"
          >
            Prendre rendez-vous
          </a>
          <a
            href={`mailto:${siteConfig.contact.email}`}
            class="text-text-light hover:text-secondary transition-colors text-sm"
          >
            Vous avez une question ? M'envoyer un email
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Section 6: FAQ -->
  <section class="py-20 lg:py-28 bg-bg-alt">
    <div class="container">
      <div class="max-w-3xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-2xl lg:text-3xl">Questions fréquentes</h2>
        </div>

        <div class="faq-list" x-data="{ openIndex: null }">
          {faqs.map((faq, index) => (
            <div class="faq-item">
              <button
                class="faq-trigger"
                @click={`openIndex = openIndex === ${index} ? null : ${index}`}
                :class={`{ 'is-open': openIndex === ${index} }`}
              >
                <span class="faq-question">{faq.question}</span>
                <span class="faq-icon">
                  <svg
                    class="w-5 h-5 transition-transform duration-300"
                    :class={`{ 'rotate-180': openIndex === ${index} }`}
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 9l-7 7-7-7"/>
                  </svg>
                </span>
              </button>
              <div
                class="faq-content"
                x-show={`openIndex === ${index}`}
                x-collapse
              >
                <p class="faq-answer">{faq.answer}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Hero Animations */
  .fade-in {
    animation: fadeInUp 0.8s ease-out forwards;
  }

  .fade-in-delay {
    animation: fadeInUp 0.8s ease-out 0.2s forwards;
    opacity: 0;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Tags Grid - Section 2 */
  .tags-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 0.75rem;
  }

  .tag-item {
    display: inline-flex;
    align-items: center;
    padding: 0.625rem 1.25rem;
    background: var(--color-bg);
    border: 1px solid rgba(228, 156, 149, 0.3);
    border-radius: 999px;
    font-size: 0.9375rem;
    color: var(--color-text);
    transition: all 0.3s ease;
  }

  .tag-item:hover {
    border-color: var(--color-secondary);
    background: rgba(228, 156, 149, 0.05);
  }

  .tag-link {
    cursor: pointer;
    text-decoration: none;
  }

  .tag-link:hover {
    background: var(--color-secondary);
    color: white;
    border-color: var(--color-secondary);
  }

  .tag-link:hover .tag-arrow {
    opacity: 1;
    transform: translateX(2px);
  }

  .tag-arrow {
    width: 1rem;
    height: 1rem;
    margin-left: 0.5rem;
    opacity: 0.5;
    transition: all 0.3s ease;
  }

  /* Cards Grid - Section 3 */
  .cards-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  @media (min-width: 768px) {
    .cards-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
    }
  }

  .service-card {
    background: var(--color-bg);
    border: 1px solid rgba(0, 0, 0, 0.06);
    border-radius: 1.5rem;
    transition: all 0.4s ease;
  }

  .service-card:hover {
    border-color: rgba(228, 156, 149, 0.3);
    box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.08);
    transform: translateY(-4px);
  }

  .card-inner {
    padding: 2rem;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .card-footer {
    margin-top: auto;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(0, 0, 0, 0.06);
  }

  .price-block {
    margin-bottom: 1rem;
  }

  .price-value {
    font-family: var(--font-heading);
    font-size: 1.75rem;
    font-weight: 500;
    color: var(--color-text);
  }

  .price-currency {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin-left: 0.25rem;
  }

  .price-duration {
    font-size: 0.875rem;
    color: var(--color-text-muted);
  }

  .card-cta {
    display: inline-flex;
    align-items: center;
    font-size: 0.9375rem;
    color: var(--color-text-light);
    transition: color 0.3s ease;
  }

  /* Steps Grid - Section 4 */
  .steps-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  @media (min-width: 768px) {
    .steps-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 3rem;
    }
  }

  .step-item {
    text-align: center;
  }

  @media (min-width: 768px) {
    .step-item {
      text-align: left;
    }
  }

  .step-num {
    display: block;
    font-family: var(--font-heading);
    font-size: 3rem;
    font-weight: 300;
    color: var(--color-accent);
    opacity: 0.5;
    margin-bottom: 0.5rem;
  }

  /* CTA Button - Section 5 */
  .cta-button {
    display: inline-block;
    padding: 1rem 2.5rem;
    border: 1.5px solid var(--color-secondary);
    border-radius: 999px;
    color: var(--color-secondary);
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  .cta-button:hover {
    background: var(--color-secondary);
    color: white;
  }

  /* FAQ Styles */
  .faq-list {
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .faq-item {
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .faq-trigger {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 0;
    text-align: left;
    background: none;
    border: none;
    cursor: pointer;
    transition: color 0.3s ease;
  }

  .faq-trigger:hover {
    color: var(--color-secondary);
  }

  .faq-question {
    font-family: var(--font-heading);
    font-size: 1.125rem;
    font-weight: 500;
  }

  .faq-icon {
    flex-shrink: 0;
    margin-left: 1rem;
    color: var(--color-secondary);
  }

  .faq-content {
    overflow: hidden;
  }

  .faq-answer {
    padding-bottom: 1.5rem;
    color: var(--color-text-light);
    line-height: 1.7;
  }
</style>
