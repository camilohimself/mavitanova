---
import BaseLayout from '../layouts/BaseLayout.astro';
import { siteConfig } from '../config/site';

/**
 * Page Prestations - Architecture UX optimisée pour la conversion (v2 Gemini)
 * Objectif: 4 demandes de RDV/semaine
 * Structure: Hero → Accompagnements → Rassurance → Confiance → Thématiques → Témoignages → FAQ → CTA
 */

const accompagnements = [
  {
    id: 1,
    title: 'Thérapie Individuelle',
    description: 'Un espace pour faire le point, surmonter une épreuve ou mieux vous connaître.',
    details: 'En cabinet ou en ligne',
    price: siteConfig.pricing.individual,
    duration: '50 min',
  },
  {
    id: 2,
    title: 'Thérapie de Couple',
    description: 'Pour rétablir la communication, surmonter une crise et retrouver une dynamique saine.',
    details: 'En cabinet',
    price: siteConfig.pricing.couple,
    duration: '75 min',
  },
  {
    id: 3,
    title: 'Chromothérapie',
    description: 'Une approche douce par les couleurs pour libérer les blocages énergétiques et émotionnels.',
    details: 'En cabinet',
    price: siteConfig.pricing.chromotherapy,
    duration: '45 min',
  },
];

const problematiques = [
  { label: 'Anxiété & Stress', href: '/ressources/anxiete-stress' },
  { label: 'Burn-out', href: '/ressources/burn-out' },
  { label: 'Confiance en soi', href: '/ressources/confiance-en-soi' },
  { label: 'Communication couple', href: '/ressources/communication-couple' },
  { label: 'Deuil & Séparation', href: '/ressources/deuil-separation' },
  { label: 'Dépression', href: '/ressources/depression' },
  { label: 'Thérapie de couple', href: '/ressources/therapie-couple' },
  { label: 'Transitions de vie', href: '/ressources/transitions-vie' },
];

const etapes = [
  {
    num: '01',
    title: 'Le premier contact',
    text: 'La prise de rendez-vous se fait simplement en ligne ou par téléphone. Ce premier pas est le vôtre, en toute liberté.',
  },
  {
    num: '02',
    title: 'Notre première séance',
    text: 'Une rencontre pour faire connaissance, exposer votre situation et définir ensemble vos objectifs, sans aucun jugement.',
  },
  {
    num: '03',
    title: 'Un cadre confidentiel',
    text: 'Chaque échange est strictement confidentiel, protégé par le secret professionnel, pour garantir votre sécurité.',
  },
];

const temoignages = [
  {
    text: "Le travail avec Charlotte m'a permis de traverser une période de burn-out avec beaucoup de bienveillance. Je me sens aujourd'hui plus serein et outillé pour gérer le stress.",
    author: 'L.',
    details: '42 ans, Lausanne',
  },
  {
    text: "Après des mois à hésiter, j'ai enfin franchi le pas. Les séances en ligne me convenaient parfaitement. Charlotte a su créer un espace de confiance malgré la distance.",
    author: 'M.',
    details: '35 ans, Sion',
  },
  {
    text: "La thérapie de couple nous a aidés à renouer le dialogue. On a appris à mieux communiquer et à se comprendre. Merci pour votre patience.",
    author: 'S. & P.',
    details: 'Martigny',
  },
];

const faqs = [
  {
    question: 'Combien de séances sont nécessaires ?',
    answer: 'Cela dépend de votre situation et de vos objectifs. Certaines personnes viennent pour quelques séances, d\'autres pour un accompagnement plus long. Nous évaluons ensemble régulièrement.',
  },
  {
    question: 'La thérapie en ligne est-elle aussi efficace ?',
    answer: 'Les études montrent que la thérapie en ligne est aussi efficace que la thérapie en présentiel pour la plupart des problématiques. L\'essentiel est la qualité de la relation thérapeutique.',
  },
  {
    question: 'Comment se passe la première séance ?',
    answer: 'C\'est un moment pour faire connaissance. Vous m\'expliquez ce qui vous amène, je vous présente ma façon de travailler, et nous voyons ensemble si nous souhaitons poursuivre.',
  },
  {
    question: 'Quels moyens de paiement acceptez-vous ?',
    answer: 'J\'accepte le paiement par TWINT ou en espèces. Le règlement se fait à la fin de chaque séance.',
  },
];
---

<BaseLayout
  title="Prestations"
  description="Consultations psychologiques : thérapie individuelle, en ligne, de couple et chromothérapie. Tarifs transparents."
>
  <!-- Section 1: Hero Émotionnel -->
  <section class="hero-section py-24 lg:py-32 relative overflow-hidden">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <div class="grid lg:grid-cols-2 gap-12 items-center">
          <div class="text-center lg:text-left fade-in">
            <h1 class="text-4xl lg:text-5xl mb-6 leading-tight">
              Votre chemin vers<br />
              <span class="text-secondary">un mieux-être</span><br />
              commence ici.
            </h1>
            <p class="text-xl text-text-light leading-relaxed">
              Que vous traversiez une période de doute, de stress, ou que vous cherchiez
              simplement à mieux vous comprendre, vous trouverez ici un espace d'écoute
              sécurisant pour vous accompagner.
            </p>
          </div>
          <div class="flex justify-center lg:justify-end fade-in-delay">
            <img
              src="/images/illustrations/path-journey.webp"
              alt=""
              class="w-full max-w-sm opacity-90"
              aria-hidden="true"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section 2: Accompagnements (remonté) -->
  <section class="py-20 lg:py-28 bg-bg-alt">
    <div class="container">
      <div class="max-w-5xl mx-auto">
        <div class="text-center mb-16">
          <h2 class="text-3xl lg:text-4xl mb-4">Mes Accompagnements</h2>
          <p class="text-text-light text-lg max-w-2xl mx-auto">
            Chaque parcours est unique. Je vous propose trois cadres pour vous accompagner.
          </p>
        </div>

        <div class="cards-grid">
          {accompagnements.map((service) => (
            <article class="service-card group">
              <div class="card-inner">
                <h3 class="text-2xl font-heading mb-3">{service.title}</h3>
                <p class="text-text-light leading-relaxed mb-4">{service.description}</p>
                <p class="text-sm text-text-muted mb-6">{service.details}</p>

                <div class="card-footer">
                  <div class="price-block">
                    <span class="price-value">{service.price}</span>
                    <span class="price-currency">{siteConfig.pricing.currency}</span>
                    <span class="price-duration">/ {service.duration}</span>
                  </div>

                  <a href="#cta-final" class="card-cta group-hover:text-secondary">
                    En savoir plus et prendre RDV
                    <svg class="w-4 h-4 ml-1 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                    </svg>
                  </a>
                </div>
              </div>
            </article>
          ))}
        </div>

        <p class="text-center text-sm text-text-muted mt-12 max-w-xl mx-auto">
          Les consultations ne sont pas remboursées par l'assurance de base.
          Certaines assurances complémentaires peuvent prendre en charge une partie des frais.
        </p>
      </div>
    </div>
  </section>

  <!-- Section 3: Rassurance - Comment ça marche -->
  <section class="py-20 lg:py-28">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl lg:text-4xl text-center mb-16">
          Mon approche :<br />
          <span class="text-secondary">bienveillance, écoute et confidentialité</span>
        </h2>

        <div class="steps-grid">
          {etapes.map((etape) => (
            <div class="step-item">
              <span class="step-num">{etape.num}</span>
              <h3 class="text-xl font-heading mb-3">{etape.title}</h3>
              <p class="text-text-light leading-relaxed">{etape.text}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Section 4: Badges de confiance -->
  <section class="py-12 lg:py-16 bg-bg-alt">
    <div class="container">
      <div class="trust-badges">
        <div class="trust-item">
          <div class="trust-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" class="w-8 h-8">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.746 3.746 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"/>
            </svg>
          </div>
          <div>
            <p class="font-heading text-lg">Psychologue FSP</p>
            <p class="text-sm text-text-muted">Fédération Suisse des Psychologues</p>
          </div>
        </div>
        <div class="trust-item">
          <div class="trust-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" class="w-8 h-8">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.697 50.697 0 0112 13.489a50.702 50.702 0 017.74-3.342M6.75 15a.75.75 0 100-1.5.75.75 0 000 1.5zm0 0v-3.675A55.378 55.378 0 0112 8.443m-7.007 11.55A5.981 5.981 0 006.75 15.75v-1.5"/>
            </svg>
          </div>
          <div>
            <p class="font-heading text-lg">Master en Psychologie</p>
            <p class="text-sm text-text-muted">Université de Lausanne</p>
          </div>
        </div>
        <div class="trust-item">
          <div class="trust-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" class="w-8 h-8">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"/>
            </svg>
          </div>
          <div>
            <p class="font-heading text-lg">Secret professionnel</p>
            <p class="text-sm text-text-muted">Confidentialité garantie</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section 5: Thématiques - Grille statique -->
  <section class="py-20 lg:py-28">
    <div class="container">
      <div class="max-w-4xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-3xl lg:text-4xl mb-4">Quel que soit votre défi</h2>
          <p class="text-text-light">
            Explorez nos guides pour mieux comprendre ce que vous traversez.
          </p>
        </div>

        <div class="themes-grid">
          {problematiques.map((item) => (
            <a href={item.href} class="theme-item group">
              <span class="theme-label">{item.label}</span>
              <svg class="theme-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
              </svg>
            </a>
          ))}
        </div>

        <p class="text-center mt-8">
          <a href="/ressources" class="text-secondary hover:underline">
            Voir tous les guides &rarr;
          </a>
        </p>
      </div>
    </div>
  </section>

  <!-- Section 6: Témoignages -->
  <section class="py-20 lg:py-28 bg-bg-alt">
    <div class="container">
      <div class="max-w-5xl mx-auto">
        <h2 class="text-3xl lg:text-4xl text-center mb-16">
          Ce qu'ils en disent
        </h2>

        <div class="testimonials-grid">
          {temoignages.map((t) => (
            <blockquote class="testimonial-card">
              <p class="testimonial-text">"{t.text}"</p>
              <footer class="testimonial-author">
                <span class="author-name">{t.author}</span>
                <span class="author-details">{t.details}</span>
              </footer>
            </blockquote>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Section 7: FAQ -->
  <section class="py-20 lg:py-28">
    <div class="container">
      <div class="max-w-3xl mx-auto">
        <div class="text-center mb-12">
          <h2 class="text-2xl lg:text-3xl">Questions fréquentes</h2>
        </div>

        <div class="faq-list" x-data="{ openIndex: null }">
          {faqs.map((faq, index) => (
            <div class="faq-item">
              <button
                class="faq-trigger"
                @click={`openIndex = openIndex === ${index} ? null : ${index}`}
                :class={`{ 'is-open': openIndex === ${index} }`}
              >
                <span class="faq-question">{faq.question}</span>
                <span class="faq-icon">
                  <svg
                    class="w-5 h-5 transition-transform duration-300"
                    :class={`{ 'rotate-180': openIndex === ${index} }`}
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 9l-7 7-7-7"/>
                  </svg>
                </span>
              </button>
              <div
                class="faq-content"
                x-show={`openIndex === ${index}`}
                x-collapse
              >
                <p class="faq-answer">{faq.answer}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Section 8: CTA Final -->
  <section id="cta-final" class="py-24 lg:py-32 bg-bg-alt">
    <div class="container">
      <div class="max-w-2xl mx-auto text-center">
        <img
          src="/images/illustrations/hand-flower.webp"
          alt=""
          class="w-32 h-auto mx-auto mb-8"
          loading="lazy"
          aria-hidden="true"
        />
        <h2 class="text-3xl lg:text-4xl mb-4">Prêt·e à faire le premier pas ?</h2>
        <p class="text-text-light text-lg mb-10 leading-relaxed">
          Je suis à votre disposition pour répondre à vos questions
          ou pour convenir d'un premier rendez-vous.
        </p>

        <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
          <a
            href="/contact"
            class="cta-button"
          >
            Prendre rendez-vous
          </a>
          <a
            href={`mailto:${siteConfig.contact.email}`}
            class="text-text-light hover:text-secondary transition-colors text-sm"
          >
            Vous avez une question ? M'envoyer un email
          </a>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  /* Hero Animations */
  .fade-in {
    animation: fadeInUp 0.8s ease-out forwards;
  }

  .fade-in-delay {
    animation: fadeInUp 0.8s ease-out 0.2s forwards;
    opacity: 0;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Cards Grid - Section 2 */
  .cards-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  @media (min-width: 768px) {
    .cards-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
    }
  }

  .service-card {
    background: var(--color-bg);
    border: 1px solid rgba(0, 0, 0, 0.06);
    border-radius: 1.5rem;
    transition: all 0.4s ease;
  }

  .service-card:hover {
    border-color: rgba(228, 156, 149, 0.3);
    box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.08);
    transform: translateY(-4px);
  }

  .card-inner {
    padding: 2rem;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .card-footer {
    margin-top: auto;
    padding-top: 1.5rem;
    border-top: 1px solid rgba(0, 0, 0, 0.06);
  }

  .price-block {
    margin-bottom: 1rem;
  }

  .price-value {
    font-family: var(--font-heading);
    font-size: 1.75rem;
    font-weight: 500;
    color: var(--color-text);
  }

  .price-currency {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin-left: 0.25rem;
  }

  .price-duration {
    font-size: 0.875rem;
    color: var(--color-text-muted);
  }

  .card-cta {
    display: inline-flex;
    align-items: center;
    font-size: 0.9375rem;
    color: var(--color-text-light);
    transition: color 0.3s ease;
  }

  /* Steps Grid - Section 3 */
  .steps-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  @media (min-width: 768px) {
    .steps-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 3rem;
    }
  }

  .step-item {
    text-align: center;
  }

  @media (min-width: 768px) {
    .step-item {
      text-align: left;
    }
  }

  .step-num {
    display: block;
    font-family: var(--font-heading);
    font-size: 3rem;
    font-weight: 300;
    color: var(--color-accent);
    opacity: 0.5;
    margin-bottom: 0.5rem;
  }

  /* Trust Badges - Section 4 */
  .trust-badges {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    max-width: 4xl;
    margin: 0 auto;
  }

  @media (min-width: 768px) {
    .trust-badges {
      flex-direction: row;
      justify-content: center;
      gap: 4rem;
    }
  }

  .trust-item {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .trust-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 3.5rem;
    height: 3.5rem;
    background: rgba(228, 156, 149, 0.1);
    border-radius: 50%;
    color: var(--color-secondary);
    flex-shrink: 0;
  }

  /* Themes Grid - Section 5 */
  .themes-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.75rem;
  }

  @media (min-width: 640px) {
    .themes-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  .theme-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1.25rem;
    background: var(--color-bg-alt);
    border: 1px solid rgba(0, 0, 0, 0.06);
    border-radius: 0.75rem;
    text-decoration: none;
    color: var(--color-text);
    transition: all 0.3s ease;
  }

  .theme-item:hover {
    background: var(--color-secondary);
    color: white;
    border-color: var(--color-secondary);
    transform: translateX(4px);
  }

  .theme-label {
    font-size: 0.9375rem;
  }

  .theme-arrow {
    width: 1.25rem;
    height: 1.25rem;
    opacity: 0.5;
    transition: all 0.3s ease;
  }

  .theme-item:hover .theme-arrow {
    opacity: 1;
    transform: translateX(4px);
  }

  /* Testimonials - Section 6 */
  .testimonials-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  @media (min-width: 768px) {
    .testimonials-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
    }
  }

  .testimonial-card {
    background: var(--color-bg);
    border: 1px solid rgba(0, 0, 0, 0.06);
    border-radius: 1rem;
    padding: 1.75rem;
  }

  .testimonial-text {
    font-size: 0.9375rem;
    line-height: 1.7;
    color: var(--color-text-light);
    font-style: italic;
    margin-bottom: 1.25rem;
  }

  .testimonial-author {
    display: flex;
    flex-direction: column;
    gap: 0.125rem;
  }

  .author-name {
    font-family: var(--font-heading);
    font-weight: 500;
    color: var(--color-text);
  }

  .author-details {
    font-size: 0.8125rem;
    color: var(--color-text-muted);
  }

  /* CTA Button - Section 8 */
  .cta-button {
    display: inline-block;
    padding: 1rem 2.5rem;
    border: 1.5px solid var(--color-secondary);
    border-radius: 999px;
    color: var(--color-secondary);
    font-size: 1rem;
    transition: all 0.3s ease;
  }

  .cta-button:hover {
    background: var(--color-secondary);
    color: white;
  }

  /* FAQ Styles - Section 7 */
  .faq-list {
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  .faq-item {
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  }

  .faq-trigger {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem 0;
    text-align: left;
    background: none;
    border: none;
    cursor: pointer;
    transition: color 0.3s ease;
  }

  .faq-trigger:hover {
    color: var(--color-secondary);
  }

  .faq-question {
    font-family: var(--font-heading);
    font-size: 1.125rem;
    font-weight: 500;
  }

  .faq-icon {
    flex-shrink: 0;
    margin-left: 1rem;
    color: var(--color-secondary);
  }

  .faq-content {
    overflow: hidden;
  }

  .faq-answer {
    padding-bottom: 1.5rem;
    color: var(--color-text-light);
    line-height: 1.7;
  }

  /* Smooth scroll for anchor links */
  html {
    scroll-behavior: smooth;
  }
</style>
