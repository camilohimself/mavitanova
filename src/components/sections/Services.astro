---
import SectionHeader from '../ui/SectionHeader.astro';
import Card from '../ui/Card.astro';
import Button from '../ui/Button.astro';
import { siteConfig } from '../../config/site';

const services = [
  {
    title: 'Thérapie individuelle',
    description: 'Votre voyage intérieur commence ici : une thérapie adaptée à vos besoins, en toute confidentialité.',
    price: siteConfig.pricing.individual,
    icon: 'user',
    featured: false,
  },
  {
    title: 'Thérapie en ligne',
    description: 'Connectez-vous à votre bien-être : une écoute attentive, partout, à tout moment.',
    price: siteConfig.pricing.individual,
    icon: 'video',
    featured: true,
  },
  {
    title: 'Thérapie de couple',
    description: 'Surmontez les obstacles à deux : construisez une relation plus forte et épanouissante.',
    price: siteConfig.pricing.couple,
    icon: 'users',
    featured: false,
  },
];

const iconPaths: Record<string, string> = {
  user: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />`,
  video: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />`,
  users: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />`,
};
---

<section class="section section-alt">
  <div class="container">
    <SectionHeader
      badge="Prestations"
      title="Des consultations adaptées à vos besoins"
      subtitle="Chaque parcours est unique. Découvrez l'accompagnement qui vous correspond."
    />

    <div class="grid md:grid-cols-3 gap-8">
      {services.map((service, index) => (
        <div
          class:list={[
            'animate-fade-up',
            `stagger-${index + 1}`,
            service.featured && 'md:-mt-4 md:mb-4',
          ]}
        >
          <Card
            class:list={[
              'h-full flex flex-col',
              service.featured && 'ring-2 ring-secondary shadow-xl',
            ]}
          >
            {service.featured && (
              <div class="badge bg-secondary text-white mb-4 self-start">
                Recommandé
              </div>
            )}

            <div class="w-14 h-14 mb-4 rounded-2xl bg-bg-lavande flex items-center justify-center">
              <svg class="w-7 h-7 text-slate" fill="none" stroke="currentColor" viewBox="0 0 24 24" set:html={iconPaths[service.icon]} />
            </div>

            <h3 class="text-xl font-heading font-medium mb-3">{service.title}</h3>
            <p class="text-text-light mb-6 flex-1">{service.description}</p>

            <div class="flex items-end justify-between pt-4 border-t border-slate/10">
              <div>
                <span class="text-3xl font-heading font-semibold text-text">{service.price}</span>
                <span class="text-text-light ml-1">{siteConfig.pricing.currency}</span>
                <span class="block text-sm text-text-muted">/ séance</span>
              </div>
              <Button
                href="/prestations"
                variant={service.featured ? 'primary' : 'outline'}
                size="sm"
              >
                En savoir plus
              </Button>
            </div>
          </Card>
        </div>
      ))}
    </div>

    <div class="text-center mt-12">
      <Button href="/prestations" variant="secondary">
        Voir toutes les prestations
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </Button>
    </div>
  </div>
</section>
