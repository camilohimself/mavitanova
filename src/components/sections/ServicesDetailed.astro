---
import { siteConfig } from '../../config/site';
import Button from '../ui/Button.astro';

const services = [
  {
    id: 'individuelle',
    title: 'Thérapie individuelle',
    subtitle: 'Votre voyage intérieur commence ici',
    description: 'La thérapie individuelle offre un espace confidentiel pour explorer vos pensées, émotions et comportements. Ensemble, nous travaillons sur vos difficultés actuelles et développons des stratégies adaptées à votre situation.',
    price: siteConfig.pricing.individual,
    duration: '50 minutes',
    forWho: [
      'Anxiété et stress',
      'Dépression',
      'Difficultés relationnelles',
      'Estime de soi',
      'Burn-out',
      'Traumatismes',
    ],
    approach: 'J\'utilise une approche intégrative, combinant différentes techniques selon vos besoins : écoute active, analyse cognitive, travail émotionnel.',
    icon: 'user',
  },
  {
    id: 'en-ligne',
    title: 'Consultation en ligne',
    subtitle: 'La thérapie où que vous soyez',
    description: 'Bénéficiez d\'un accompagnement psychologique de qualité depuis le confort de votre domicile. La consultation en ligne offre la même efficacité qu\'en présentiel, avec plus de flexibilité.',
    price: siteConfig.pricing.individual,
    duration: '50 minutes',
    forWho: [
      'Personnes à mobilité réduite',
      'Expatriés et voyageurs',
      'Emploi du temps chargé',
      'Éloignement géographique',
      'Préférence pour le domicile',
      'Discrétion souhaitée',
    ],
    approach: 'Via une plateforme vidéo sécurisée, nous travaillons ensemble comme en cabinet. La connexion humaine reste au cœur de l\'accompagnement.',
    icon: 'video',
    featured: true,
  },
  {
    id: 'couple',
    title: 'Thérapie de couple',
    subtitle: 'Reconstruire ensemble',
    description: 'La thérapie de couple aide à améliorer la communication, résoudre les conflits et renforcer votre relation. Un espace neutre pour s\'exprimer et se comprendre.',
    price: siteConfig.pricing.couple,
    duration: '75 minutes',
    forWho: [
      'Problèmes de communication',
      'Conflits répétitifs',
      'Infidélité',
      'Crise de couple',
      'Désir de renforcer le lien',
      'Préparation au mariage',
    ],
    approach: 'Je facilite le dialogue entre les partenaires, aide à identifier les schémas dysfonctionnels et accompagne la reconstruction de la confiance.',
    icon: 'users',
  },
  {
    id: 'chromotherapie',
    title: 'Chromothérapie',
    subtitle: 'Le pouvoir des couleurs',
    description: 'La chromothérapie utilise les propriétés des couleurs pour favoriser l\'équilibre émotionnel et le bien-être. Une approche complémentaire douce et naturelle.',
    price: siteConfig.pricing.chromotherapy,
    duration: '45 minutes',
    forWho: [
      'Stress et tensions',
      'Troubles du sommeil',
      'Fatigue chronique',
      'Déséquilibres émotionnels',
      'Recherche de bien-être',
      'Complément à la thérapie',
    ],
    approach: 'Chaque couleur possède une vibration particulière qui peut influencer notre état psycho-émotionnel. Cette méthode peut être intégrée à un suivi classique.',
    icon: 'sparkles',
  },
];

const iconPaths: Record<string, string> = {
  user: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />`,
  video: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z" />`,
  users: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />`,
  sparkles: `<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" />`,
};
---

<section class="section">
  <div class="container">
    <div class="text-center max-w-3xl mx-auto mb-16">
      <span class="badge mb-4">Mes prestations</span>
      <h2 class="mb-4">Un accompagnement adapté à vos besoins</h2>
      <p class="text-lg text-text-light">
        Chaque personne est unique. Découvrez les différentes formes d'accompagnement que je propose.
      </p>
    </div>

    <div class="space-y-16">
      {services.map((service, index) => (
        <div
          id={service.id}
          class:list={[
            'grid lg:grid-cols-2 gap-12 items-center animate-fade-up',
            index % 2 === 1 && 'lg:flex-row-reverse',
          ]}
        >
          <!-- Content -->
          <div class:list={[index % 2 === 1 && 'lg:order-2']}>
            {service.featured && (
              <span class="badge bg-secondary text-white mb-4">
                Recommandé
              </span>
            )}

            <div class="flex items-center gap-4 mb-4">
              <div class="w-14 h-14 rounded-2xl bg-bg-lavande flex items-center justify-center">
                <svg class="w-7 h-7 text-slate" fill="none" stroke="currentColor" viewBox="0 0 24 24" set:html={iconPaths[service.icon]} />
              </div>
              <div>
                <h3 class="text-2xl font-heading font-medium">{service.title}</h3>
                <p class="text-secondary font-medium">{service.subtitle}</p>
              </div>
            </div>

            <p class="text-text-light mb-6 leading-relaxed">
              {service.description}
            </p>

            <div class="bg-bg-alt rounded-xl p-6 mb-6">
              <h4 class="font-medium mb-3">Pour qui ?</h4>
              <div class="grid grid-cols-2 gap-2">
                {service.forWho.map((item) => (
                  <div class="flex items-center gap-2 text-sm text-text-light">
                    <svg class="w-4 h-4 text-secondary flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    {item}
                  </div>
                ))}
              </div>
            </div>

            <p class="text-sm text-text-muted italic mb-6">
              {service.approach}
            </p>

            <div class="flex items-center gap-6">
              <div>
                <span class="text-3xl font-heading font-bold text-text">{service.price}</span>
                <span class="text-text-light ml-1">{siteConfig.pricing.currency}</span>
                <span class="block text-sm text-text-muted">{service.duration}</span>
              </div>
              <Button href="/contact#reservation" variant={service.featured ? 'primary' : 'outline'}>
                Réserver cette prestation
              </Button>
            </div>
          </div>

          <!-- Visual -->
          <div class:list={[
            'relative',
            index % 2 === 1 && 'lg:order-1',
          ]}>
            <div class="aspect-[4/3] rounded-3xl bg-gradient-to-br from-bg-lavande to-primary/20 flex items-center justify-center">
              <div class="w-32 h-32 rounded-full bg-white/50 flex items-center justify-center">
                <svg class="w-16 h-16 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24" set:html={iconPaths[service.icon]} />
              </div>
            </div>

            {service.featured && (
              <div class="absolute -bottom-4 -right-4 bg-secondary text-white rounded-2xl p-4 shadow-lg">
                <div class="text-sm font-medium">Consultation</div>
                <div class="text-2xl font-bold">En ligne</div>
              </div>
            )}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
